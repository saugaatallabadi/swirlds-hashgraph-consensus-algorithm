"; -*- Mode: Lisp -*-"
(SYSTEM:INIT-FASL :VERSION 42)
(SETQ SYSTEM:*SOURCE* #P"/home/vibhu/swirlds/fcfs/lisp/chunk.lisp")
(SETQ SYSTEM::*FASL-UNINTERNED-SYMBOLS* #(#:CHUNK- #:G8411 #:G8412 #:G8413 #:G8448 #:G8493 #:G8545 #:G8589 #:G8641 #:G8686))
(SETQ SYSTEM:*FASL-LOADER* (SYSTEM::MAKE-FASL-CLASS-LOADER "org.armedbear.lisp.chunk_tmp2HW1JPIC"))
(SYSTEM:%IN-PACKAGE "FCFS")
(SYSTEM:FSET 'OS-SYNC (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 0) 18 '(FILESTREAM) 
#1=NIL)
(SYSTEM:FSET 'OS-SYNC-DIR (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 1) 18 '(DIR) 
#1=NIL)
(SYSTEM:FSET 'FCFS-SYNC (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 2) 18 '#1=NIL 
#1# )
(DEFPARAMETER *FS-LEVELS* 1)
(SYSTEM:FSET 'MAKE-CHUNK-DIRS (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 3) 
827 '(DIR &OPTIONAL (LEVELS *FS-LEVELS*)) #1=NIL)
(SYSTEM:FSET 'MAKE-FILE-SYSTEM-DIRS1 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
4) 1395 '(DIR LEVELS PASS) #1=NIL)
(SYSTEM:FSET 'MAKE-DIRECTORY (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 6) 1865 
'(PATHSPEC) #1=NIL)
(DEFVAR *VOLUME-DIR* #1=NIL)
(SYSTEM:FSET 'CHUNK-PATH-NAME-H (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 7) 
2002 '(HASH) #1=NIL)
(SYSTEM:FSET 'CHUNK-PATH-NAME-H1 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
8) 2099 '(HASH BASEDIR) #1=NIL)
(SYSTEM:FSET 'CHUNK-SUBDIR-PATHNAME (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
9) 2304 '(HEX) #1=NIL)
(SYSTEM:FSET 'CHUNK-PATH-NAME-H2 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
10) 2673 '(HASH) #1=NIL)
(SYSTEM:FSET 'CHUNK-PATH-NAME-H3 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
11) 2868 '(HASH) #1=NIL)
(DEFPARAMETER *CHUNK-SIZE* (* 16 1024))
(SYSTEM:COMPILER-DEFSTRUCT 'CHUNK :CONC-NAME '#0? :DEFAULT-CONSTRUCTOR 'MAKE-CHUNK 
:COPIER 'COPY-CHUNK :PREDICATE '"CHUNK-P" :DIRECT-SLOTS '(#1=#(#2=SYSTEM::DEFSTRUCT-SLOT-DESCRIPTION
 HASH 0 CHUNK-HASH #3=NIL #4=T #3# ) #5=#(#2#  SIZE 1 CHUNK-SIZE #3#  #4#  #3# ) 
#6=#(#2#  DATA 2 CHUNK-DATA #3#  #4#  #3# )) :SLOTS '(#1#  #5#  #6# ) :INHERITED-ACCESSORS 
'#3#  :DOCUMENTATION '#3# )
(SYSTEM:FSET 'MAKE-CHUNK (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 12) 3108 
'(&KEY ((:HASH #1?) #1=NIL) ((:SIZE #2?) #1# ) ((:DATA #3?) #1# )) #1# )
(SYSTEM:FSET 'CHUNK-P (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 13) 3108 '(SYSTEM::OBJECT) 
#1=NIL)
(PROCLAIM '(FTYPE (FUNCTION * T) CHUNK-HASH))
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 14))
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 15))
(SYSTEM:PUT 'CHUNK-HASH 'SYSTEM:SETF-FUNCTION (SYSTEM::MAKE-STRUCTURE-WRITER 0 'CHUNK))
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 17))
(PROCLAIM '(FTYPE (FUNCTION * T) CHUNK-SIZE))
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 19))
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 20))
(SYSTEM:PUT 'CHUNK-SIZE 'SYSTEM:SETF-FUNCTION (SYSTEM::MAKE-STRUCTURE-WRITER 1 'CHUNK))
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 22))
(PROCLAIM '(FTYPE (FUNCTION * T) CHUNK-DATA))
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 24))
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 25))
(SYSTEM:PUT 'CHUNK-DATA 'SYSTEM:SETF-FUNCTION (SYSTEM::MAKE-STRUCTURE-WRITER 2 'CHUNK))
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 27))
(SYSTEM::%SET-FDEFINITION 'COPY-CHUNK (FUNCTION COPY-STRUCTURE))
(SYSTEM:FSET 'MAKE-CHUNK-ARRAY (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 29) 
3208 '#1=NIL #1# )
(SYSTEM:FSET 'MAKE-CHUNK2 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 30) 3289 
'#1=NIL #1# )
(SYSTEM:FSET 'COPY-CHUNK (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 31) 3435 
'(C) #1=NIL)
(SYSTEM:FSET 'COPY-CHUNK-DATA (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 32) 
3622 '(CHUNK) #1=NIL)
(SYSTEM:FSET 'COPY-BYTE-ARRAY (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 33) 
3713 '(#1=ARR &OPTIONAL (MAXBYTES (LENGTH #1# ))) #2=NIL)
(DEFPARAMETER *DIGEST* :SHA256)
(DEFPARAMETER *CHUNK-FILE-NAME-LENGTH* (* 2 (DIGEST-LENGTH *DIGEST*)))
(SYSTEM:FSET 'HASH (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 34) 4032 '(BYTE-ARRAY 
END) #1=NIL)
(SYSTEM:FSET 'COMPUTE-CHUNK-HASH (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
35) 4998 '(CHUNK) #1=NIL)
(SYSTEM:FSET 'CHUNK-HASH2 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 36) 5081 
'(CHUNK) #1=NIL)
(SYSTEM:FSET 'CHUNK-PATH-NAME (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 37) 
5189 '(CHUNK) #1=NIL)
(SYSTEM:FSET 'CHUNK-PATH-NAME3 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 38) 
5535 '(CHUNK) #1=NIL)
(SYSTEM:FSET 'WRITE-CHUNK-DATA (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 39) 
5612 '(CHUNK OUT) #1=NIL)
(SYSTEM:FSET 'LOAD-CHUNK-REAL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 40) 
6199 '(HASH) #1=NIL)
(SYSTEM:FSET 'LOAD-CHUNK-REAL1 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 41) 
6457 '(HASH PATH) #1=NIL)
(DEFVAR *WRITES* (MAKE-HASH-TABLE :TEST (FUNCTION EQUALP)))
(DEFVAR *JAVA-WRITES* (MAKE-HASH-TABLE :TEST (FUNCTION EQUALP)))
(DEFVAR *WRITES-LCK* (MAKE-LOCK "writes-lock"))
(SYSTEM:FSET 'PENDING-WRITE (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 42) 6987 
'(HASH) #1=NIL)
(SYSTEM:FSET 'GET-JAVA-WRITE (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 43) 
7073 '(HASH) #1=NIL)
(SYSTEM:FSET 'PENDING-WRITE2 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 44) 
7161 '(HASH) #1=NIL)
(SYSTEM:FSET 'PIN-CHUNK-IF-AVAILABLE (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
45) 7245 '(HASH PIN-FN) #1=NIL)
(SYSTEM:FSET 'CHUNK-AVAILABLE1 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 46) 
8014 '(HASH PATH) #1=NIL)
(SYSTEM:FSET 'CHUNK-FILE-LENGTH (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 47) 
8104 '(HASH) #1=NIL)
(SYSTEM:FSET 'CHUNK-FILE-LENGTH1 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
48) 8368 '(HASH PATH) #1=NIL)
(DEFPARAMETER *WRITE-QUEUE-MAX* 20)
(DEFVAR *WRITE-QUEUE* (MAKE-QUEUE :FIXED-CAPACITY *WRITE-QUEUE-MAX*))
(SYSTEM:FSET 'LOAD-CHUNK-BG (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 49) 8776 
'(HASH) #1=NIL)
(SYSTEM:FSET 'NOTE-OUTSTANDING-JAVA-WRITE (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
50) 8893 '(DATA LEN HASH) #1=NIL)
(SYSTEM:FSET 'REMOVE-OUTSTANDING-JAVA-WRITE (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
51) 9113 '(HASH) #1=NIL)
(SYSTEM:FSET 'NOTE-OUTSTANDING-WRITE (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 
52) 9225 '(CHUNK) #1=NIL)
(SYSTEM:FSET 'SAVE-CHUNK-BG (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 53) 9406 
'(CHUNK) #1=NIL)
(SYSTEM:FSET 'BG-WRITE (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 54) 9533 '#1=NIL 
#1# )
(DEFVAR *BG-WRITE* #1=NIL)
(DEFVAR *N-BG-WRITE* 3)
(DEFVAR *SYNC-LCK* (MAKE-RECURSIVE-LOCK "sync-lock"))
(SYSTEM:FSET 'START-BG-WRITE (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 56) 
9898 '#1=NIL #1# )
(SYSTEM:FSET 'STOP-BG-WRITE (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 58) 10129 
'#1=NIL #1# )
(SYSTEM:FSET 'SYNC-BG-WRITE (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 60) 10398 
'#1=NIL #1# )
(START-BG-WRITE)
(DEFPARAMETER *CHUNK-CACHE-SIZE* 10)
(DEFVAR *CACHE-LCK* (MAKE-LOCK "cache-lock"))
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 61))
(SYSTEM:FSET 'SAVE-CHUNK-REAL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 65) 
11446 '(CHUNK) #1=NIL)
(SYSTEM:FSET 'SAVE-CHUNK-REAL1 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 66) 
12008 '(CHUNK PATH) #1=NIL)
(SYSTEM:FSET 'ANCHOR-DIR (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 68) 12883 
'(TRUEDIR) #1=NIL)
(FUNCALL (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 69))
(SYSTEM:FSET 'FILES-DIR1 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 71) 14005 
'(DIR) #1=NIL)
(SYSTEM:FSET 'FILES-DIR (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 72) 14055 
'#1=NIL #1# )
(SYSTEM:FSET 'FILES-GC-DIR1 (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 73) 14105 
'(DIR) #1=NIL)
(SYSTEM:FSET 'FILES-GC-DIR (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 74) 14161 
'#1=NIL #1# )
(SYSTEM:FSET 'FILES-TMP-DIR (SYSTEM::GET-FASL-FUNCTION SYSTEM:*FASL-LOADER* 75) 14217 
'#1=NIL #1# )
